<!DOCTYPE html>
<html>
<head>
  <title> Validation |  Missing Maps</title>
<meta name="og:title" content="Validation">
<meta property="og:url" content="https://osmus.github.io/dogwood/contribute/validation/">

<meta name="og:description" content="Validation helps ensure that the mapping is good quality and usable by the community.
">

  <meta name="og:image" content="https://osmus.github.io/dogwood/img/validation/validation.jpg">
  <meta name="og:image:url" content="https://osmus.github.io/dogwood/img/validation/validation.jpg">

<meta name="twitter:site" content="@TheMissingMaps">
<meta name="twitter:creator" content="@TheMissingMaps">
<script type="application/ld+json">
  {
    "@context" : "https://schema.org",
    "@type" : "WebSite",
    "name" : "Missing Maps",
    
    "url" : "https://osmus.github.io"
  }
</script>
  <link rel="preload" href="https://osmus.github.io/dogwood/img/validation/validation.jpg" as="image"><!-- load the most prominent image first -->

  <meta charset="UTF-8"/>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@TheMissingMaps">
<script type="application/ld+json">
  {
    "@context" : "https://schema.org",
    "@type" : "WebSite",
    "name" : "Missing Maps",
    
    "url" : "https://osmus.github.io"
  }
</script>
<link rel="apple-touch-icon" sizes="57x57" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://osmus.github.io/dogwood/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://osmus.github.io/dogwood/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://osmus.github.io/dogwood/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://osmus.github.io/dogwood/img/favicon/favicon-16x16.png">
<link rel="manifest" href="https://osmus.github.io/dogwood/manifest.json">
<link rel="shortcut icon" href="https://osmus.github.io/dogwood/img/favicon/favicon.ico" type="image/x-icon" />
<meta name="msapplication-TileColor" content="#000">
<meta name="msapplication-TileImage" content="https://osmus.github.io/dogwood/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#000">
<meta name="homepage" content="https://osmus.github.io/dogwood">






<link href="https://osmus.github.io/dogwood/assets/style.css" rel="stylesheet" />

</head>
<body class="layout-page
has-image


    page-get-involved
  
    page-validation
  
ispage-validation">
  <script type="text/javascript">
  // paste your analytics trackers here
</script>
  <div class="topbar">
  <div class="container">
    <a href="https://osmus.github.io/dogwood" class="site-wordmark">
      <img class="logo" src="https://osmus.github.io/dogwood/img/MM_white_typography.svg"/>
      <span class='text'>Missing Maps</span>
    </a>
    <ul class='headernav'><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/">Get Involved</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/mapswipe/" >MapSwipe</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/tasking-manager/" >The Tasking Manager</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/validation/" >Validation</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/field-mapping/" >Field Mapping</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/advanced-mapping/" >Advanced Mapping</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/mapping-guides/" >Mapping Guides</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/organize/">Organize an Event</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/training-materials/" >Training Materials</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/planning-checklist/" >Planning Checklist</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/event-day-checklist/" >Event Day Checklist</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/blog/">Blog</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/blog/" >Latest</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/blog/archive/" >Archive</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/support/">Support</a></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/stats/">Stats</a></li><li class="">
            <a class='button-label button bordered' href="https://osmus.github.io/dogwood/events">Missing Maps Events</a></li></ul>
  </div>
</div>
  <div class="layout-body">
    <article>
  <div class="content">
    <div class="container"><div class="breadcrumbs"><a href="https://osmus.github.io/dogwood/contribute/">
      <svg class="iconsvg"><use xlink:href="#arrow-left"></use></svg>
      Get Involved</a></div><div class="pagenav">
  <div>
    <a class="selflink" href="https://osmus.github.io/dogwood/contribute/validation/"><h1>Validation</h1></a></div>
  <ul>
    
  </ul>
</div></div>
    <div class="section"><div class='cover '>
        <div class="container stretch"><figure class="cover-image-container">
                    <div class="cover-image" role="img" style="background-image: url('https://osmus.github.io/dogwood/img/validation/validation.jpg');"></div></figure></div>
    </div></div>
    <div class="container">
      <div class='prose'>
        

<p>Validation is an important part of the Missing Maps process. Getting a second, third, or fourth pair of eyes on mapped features goes a long way in ensuring the quality of data being added to OpenStreetMap and being used in vulnerable communities around the world. Validating requires confidence in your mapping abilities as well as the willingness to help coach and advise newer mappers. The Missing Maps Project is a community of mappers with different levels of mapping experience, all who have a common goal of improving the availability of quality data for humanitarian use.</p>

<h2 id="validators">Validators</h2>

<h4 id="1-identify-if-becoming-a-validator-is-right-for-you">1. Identify if becoming a validator is right for you.</h4>

<p>Validating isn’t for everyone; validation requires patience and attention to detail. Some experience mapping in OpenStreetMap and HOT projects is a must, but don’t feel that you need to be an expert to start. If you’re new to Missing Maps or OpenStreetMap mapping in general, head over to our resources for new mappers. Check out our <a href="../../assets/downloads/en/MissingMaps_validation_faq_en.pdf" target="_blank">Validation FAQs</a> to gain some insight on what validating entails.</p>

<p>If you’ve mapped before using iD Editor, make sure to check out our advanced mapping section to get started with JOSM first. Validating in iD Editor is possible, but it’s best to use JOSM.</p>

<h4 id="2-build-your-skills">2. Build your skills.</h4>

<p>Becoming a more efficient mapper is crucial to becoming a validator. The <a href="https://josm.openstreetmap.de/" target="_blank"> JOSM Editor</a> is a customizable editor for OpenStreetMap with a number of tools and plugins to make mapping and validating easier! Check out this guide to validation using the JOSM editor. For instruction setting up JOSM, you can also head over to <a href="https://learnosm.org/en/josm/" target="_blank">LearnOSM.</a></p>

<p>While validating in JOSM is preferred, you can also begin to improve the map through iD Editor. Check out this video to learn some of the things to look for:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/2h12CKnvK38?si=hTyVBpotQF3u_1ZE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>

<h4 id="3-collaborate-as-part-of-the-broader-community">3. Collaborate as part of the broader community.</h4>

<p>Different validators have different techniques for validating. Join the conversation on the <a href="http://slack.hotosm.org/" target="_blank">HOTOSM Slack</a> validation channel or reach out on the <a href="https://lists.openstreetmap.org/listinfo/hot" target="_blank">HOT Mailing List</a>. Contribute resources that you find helpful and give back to the community! Being a part of the Missing Maps community means working together in a positive and inclusive environment; when giving feedback to mappers, be sure to keep a positive tone and stay mindful of their contributions and desire to help - it’s what keeps OSM growing!</p>

<h4 id="4-validation-faqs">4. Validation FAQs</h4>

<h5 id="how-do-i-know-when-im-ready-to-validate">How do I know when I’m ready to validate?</h5>

<p>After you’ve had some experience mapping, you may find yourself correcting other contributors’ work. When you find that you are doing this on a regular basis, and you are finding it easier to spot and correct the mistakes, you might be interested in becoming a validator. Validating is not to every person’s liking but reach out to the HOTOSM community and ask for guidance! We’re happy to help!</p>

<h5 id="can-i-validate-with-id-editor">Can I validate with iD Editor?</h5>

<p>Yes you can, but it is a lot more difficult to catch all the errors. JOSM Editor has a lot more tools that help new validators find the errors and also to fix some of them, so it is preferable that you learn to map with JOSM first.</p>

<h5 id="how-do-i-get-started-validating">How do I get started validating?</h5>

<p>The first thing you need to do is learn about what validating is. The <a href="https://wiki.openstreetmap.org/wiki/Tasking_Manager/Validating_data" target="_blank">Validating Data</a> wiki is a great place to start. You’ll want to learn to edit using the <a href="https://josm.openstreetmap.de/" target="_blank">JOSM Editor</a>. JOSM has a number of very useful validation tools which can make the process much easier and more efficient.</p>

<h5 id="what-are-the-steps-when-validating-a-project">What are the steps when validating a project?</h5>

<p>The first thing to do is carefully read the instructions for the project you are going to validate so that you understand what the mappers are being asked to do. When checking out each task, do a quick once-over to size up the quality of the mapping. Change or modify what is not in line with the provided instructions, and depending on the amount of time you have available, either complete the task to how it should be mapped or invalidate and leave a constructive comment on why you are invalidating.</p>

<h5 id="how-do-i-know-the-task-is-mapped-well-enough">How do I know the task is mapped well enough?</h5>

<p>Before you start validating check out the instructions tab on the project. See what the requesting organization is looking for (buildings, buildings and roads, roads, landuse, etc.). When you check out a task make sure that everything being requested is mapped. If looking at buildings make sure they are all squared (corners right angles) or circled, depending on the shape. Do this on a building by building basis as not every building will need squared edges. Make sure every feature is tagged, not just area=yes.</p>

<h5 id="how-should-i-be-tagging-roads">How should I be tagging roads?</h5>

<p>Typically, most HOTOSM tasks will request that you follow the <a href="https://wiki.openstreetmap.org/wiki/Highway_Tag_Africa" target="_blank">Highway Tag Africa Wiki</a>. This is due to the road conditions in African countries not always corresponding to their economic and social role. A road typology should be based on the road importance and not on the surface or the visual appearance of a road.</p>

<h5 id="should-i-just-review-the-task-and-invalidate-or-should-i-finish-the-task-and-validate">Should I just review the task and invalidate or should I finish the task and validate?</h5>

<p>This ultimately depends on how much time you have to validate. If you open the task and it’s obvious that the instructions weren’t followed and there are a lot of features that remain unmapped, then invalidate. If the task is complete but just needs some cleaning up (i.e. squared buildings, adding one or two more buildings) then it is advised that you fix what needs to be fixed in the task, and leave a detailed comment for the user who marked it as done including ways that this task could have been mapped better.</p>

<h5 id="use-this-resource-to-see-examples-of-structures-in-some-of-our-frequent-project-areas">Use this resource to see examples of structures in some of our frequent project areas.</h5>

<p>Use these guides to see examples of road features around the world: African Highways Guide and General Highway Guide. Note, images and descriptions might be helpful even if not mapping in that specific area. Note, road surface materials used doesn’t always convey the importance of a route. Please keep in mind context as well as materials when tagging roads.</p>

<h5 id="what-sort-of-feedback-should-i-give">What sort of feedback should I give?</h5>

<p>Timely, positive, and constructive. Many projects are mapped by beginners at mapathons. Please remember that we were all new mappers at one point, and consider how your tone could impact the decision of a mapper to return to map again. If you find a number of tasks that have been completed by the same mapper, you only need to tag them in the comment once or twice. If the contribution by the mapper is over 2 weeks old, it is not necessary to tag the user.</p>

<h5 id="when-leaving-a-comment-please-tag-the-mapper-in-the-comment-using-the--key-see-some-examples-of-useful-comments-below">When leaving a comment, please tag the mapper in the comment using the “@” key. See some examples of useful comments below:</h5>

<ul>
  <li>
    <p>Well-mapped task (Validated): Hi @user, thanks for contributing! Everything here looks great!</p>
  </li>
  <li>
    <p>When a very new mapper is good, let them know! Good work @user. You are correctly identifying the buildings/roads from the background imagery and mapping them at the correct size and shape. Thank you for your time (or Thank you for contributing to this Project). Please keep mapping!</p>
  </li>
  <li>
    <p>Okay-mapped task (Validated): Hi @user, thanks for contributing! I found a few additional buildings/roads that could be mapped here, so I went ahead and mapped them. Also, please be sure to square your buildings, which can be done by pressing <code class="language-plaintext highlighter-rouge">Q</code> in both iD editor and JOSM. I finished everything up here. Thanks again!</p>
  </li>
  <li>
    <p>Poorly-mapped task (Invalidated): Hi @user, thanks for contributing! It looks like there are quite a few buildings left to map here. Make sure if the task isn’t complete, to click “No” under the Task Status in response to “Is this task completely mapped?”. If you have questions about what should be mapped, check out the instructions tab. Please reach out if you have any questions!</p>
  </li>
</ul>

<h5 id="should-i-validate-roads-on-a-buildings-project">Should I validate roads on a buildings project?</h5>

<p>Please focus on validating the key features for that specific project. It’s important to read the Project Manager’s instructions first so you understand what the mapper’s goal was. However if you spot a small change that could be tweaked we appreciate your map stewardship. If large changes need to be made on other features, the best way to do this is via a separate task with corresponding instructions. Such a project may already exist! If you can’t find a corresponding task, please reach out to the project PM directly if you notice large changes that need to be made in that project area.</p>

<h5 id="what-josm-plugins-are-most-useful-for-validating">What JOSM plugins are most useful for validating?</h5>

<p>Plugins are tools that must be added using the preferences dialogue box. Pull down the edit menu, click on preferences and click on the electric cord/wall outlet. Here are plugins that we suggest for JOSM mapping/editing/validating: apache-commons; auto-tools; buildings_tools; ejml; geotools; imagery_offset_db; jaxb; jts; mapwithai; opendata; scripting; todo; utilsplugin2.</p>

<h5 id="should-i-delete-poorly-drawn-features">Should I delete poorly drawn features?</h5>

<p>Where possible, it is encouraged to fix poorly drawn features rather than deleting and redrawing them. This is done to preserve the edit history of the feature. There is an easy way to do this with the UtilsPlugin2 by using the Replace Geometry Tool. In some cases, it is more work than it is worth to fix features and the only practical solution is to delete them and redraw. Before deleting features, always ensure that it was not created by a local mapper! Check on the date of the mapping and if the changeset comment links to a mapathon using the Object History function in JOSM.</p>

<h5 id="i-notice-that-some-projects-limit-who-can-validate-what-does-this-mean">I notice that some projects limit who can validate. What does this mean?</h5>

<p>Some projects are available for validation by intermediate or advanced mappers. Other projects require that you join a validation team. To the right under the Teams and Permissions section in the Tasking Manager is a link to join the teams that are approved for that specific project. HOT manages a global team of validators that many of the response projects on the Tasking Manager require you to join. To join, please follow the instructions below or use this link to connect with the team manager.</p>

<h2 id="data-quality-tools-for-project-managers">Data Quality Tools for Project Managers</h2>

<p>Are you managing projects using a tasking manager? Are you curious to see how the mapping is going but don’t want to wait until your mappers finish the project? Try using these tools:</p>

<h3 id="osmcha">OSMCha</h3>

<p><a href="https://osmcha.org/" target="_blank">OSMCha</a> short for OpenStreetMap Changeset Analyzer, is a web tool to help mappers analyze and review data changes to OSM. The objective of the tool is to help detect vandalism and act on bad changes to the map data. If using the HOT-TM, you’ll find this tool at the bottom of your project page.</p>

<h3 id="osmose">Osmose</h3>

<p><a href="https://wiki.openstreetmap.org/wiki/Osmose" target="_blank">Osmose</a> is a quality assurance tool that detects issues in OpenStreetMap data by showing anomalies. It is also useful for integrating third-party data sets by conflation.</p>

<h3 id="ohsome">Ohsome</h3>

<p>The <a href="https://docs.ohsome.org/ohsome-api/v1/" target="_blank">ohsome API</a> is a generic web API for analysing OSM history data. The ohsome API lets you analyze the rich data source of the OpenStreetMap history and is based on the OpenStreetMap History Database (OSHDB). You can either perform analyses using a dashboard-like application, or use the ohsome API directly and work with its CSV, JSON or GeoJSON responses.</p>

<h3 id="cartong-mapathon-dashboard">CartONG Mapathon Dashboard</h3>

<p>Looking for another way to track your group’s edits? CartONG has you <a href="http://mapathon.cartong.org/" target="_blank">covered</a>.</p>

<h3 id="maproulette">MapRoulette</h3>

<p><a href="https://maproulette.org/" target="_blank">MapRoulette</a> is a gamified approach to fixing OSM bugs that breaks common OpenStreetMap data problems into micro tasks. This tool is best used after your event.</p>

<p>From everyone at Missing Maps, thanks for keeping your eye on data quality.</p>

<p>Happy Mapping!</p>


      </div></div>
  </div>
  <div class="themed banner-footer"></div>
</article>

  </div>
  <div class="footer dark">
  <div class="container">
    <div class="top">
      <a href="https://osmus.github.io/dogwood" class="site-wordmark">
        <img class="logo" src="https://osmus.github.io/dogwood/img/MM_white_typography.svg"/>
        <span class="text">Missing Maps</span>
      </a>
      <ul class="icon-buttons"><li>
            <a href="https://youtube.com/c/themissingmaps" target="_blank" title="YouTube">
              <svg class="iconsvg"><use xlink:href="#youtube"></use></svg>
            </a>
          </li><li>
            <a href="https://instagram.com/themissingmaps" target="_blank" title="Instagram">
              <svg class="iconsvg"><use xlink:href="#instagram"></use></svg>
            </a>
          </li><li>
            <a href="https://twitter.com/TheMissingMaps" target="_blank" title="Twitter">
              <svg class="iconsvg"><use xlink:href="#twitter"></use></svg>
            </a>
          </li><li>
            <a href="https://www.facebook.com/TheMissingMaps" target="_blank" title="Facebook">
              <svg class="iconsvg"><use xlink:href="#facebook"></use></svg>
            </a>
          </li><li>
            <a href="https://www.linkedin.com/company/missing-maps" target="_blank" title="LinkedIn">
              <svg class="iconsvg"><use xlink:href="#linkedin"></use></svg>
            </a>
          </li><li>
            <a href="https://github.com/MissingMaps" target="_blank" title="GitHub">
              <svg class="iconsvg"><use xlink:href="#github"></use></svg>
            </a>
          </li><li>
            <a href="mailto:info@hotosm.org" title="Email">
              <svg class="iconsvg"><use xlink:href="#envelope"></use></svg>
            </a>
          </li></ul>
    </div>
    <br/><div class="sitemap"><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/contribute/">Get Involved</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/mapswipe/" >MapSwipe</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/tasking-manager/" >The Tasking Manager</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/validation/" >Validation</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/field-mapping/" >Field Mapping</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/advanced-mapping/" >Advanced Mapping</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/mapping-guides/" >Mapping Guides</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/organize/">Organize an Event</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/training-materials/" >Training Materials</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/planning-checklist/" >Planning Checklist</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/event-day-checklist/" >Event Day Checklist</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/blog/">Blog</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/blog/" >Latest</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/blog/archive/" >Archive</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/support/">Support</a>
      </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/stats/">Stats</a>
      </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/events">Missing Maps Events</a>
      </li></ul></div><hr/>
    <div class="smallprint">
      <p>© 2024 Missing Maps</p><p>Powered by <a href="https://github.com/osmus/dogwood" target="_blank">Dogwood</a></p>
    </div>
  </div>
</div>

  <script type="text/javascript">
  fetch("https://osmus.github.io/dogwood/assets/icons/fa-solid.svg")
    .then(function(response) {
        return response.text();
    })
    .then(function(text) {
        var div = document.createElement('div');
        div.innerHTML = text;
        document.body.insertBefore(div, document.body.childNodes[0]);
    });

fetch("https://osmus.github.io/dogwood/assets/icons/fa-brands.svg")
    .then(function(response) {
        return response.text();
    })
    .then(function(text) {
        var div = document.createElement('div');
        div.innerHTML = text;
        document.body.insertBefore(div, document.body.childNodes[0]);
    });
  document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.time').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || parseTime(el.textContent);
    var timeZoneLabel = date.toLocaleDateString(undefined, {
      day: '2-digit',
      timeZoneName: 'long',
      timeZone: targetTimeZone,
    }).substring(4);
    var localizedTimeString = date.toLocaleString(undefined, {
      hour: 'numeric',
      minute: 'numeric',
      timeZoneName: 'short',
      timeZone: targetTimeZone,
    });
    el.innerHTML = '<span title="' + timeZoneLabel + '">' + localizedTimeString + '</span>';
  });

  document.querySelectorAll('.day-long').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || new Date();
    var localizedTimeString = date.toLocaleDateString(undefined, {
      weekday: 'long',
      month: 'long',
      day: 'numeric',
      timeZone: targetTimeZone,
    });
    el.innerHTML = localizedTimeString;
  });

  document.querySelectorAll('.timezone').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || new Date();
    el.textContent = date.toLocaleDateString(undefined, {
      day:'2-digit',
      timeZoneName: 'long',
      timeZone: targetTimeZone,
    }).substring(4);
  });

  function parseTime(t) {
    var time = t.match( /(\d+)(?::(\d\d))?\s*([pP]|[aA]?)/ );
    var h = parseInt(time[1]);

    // if am or pm
    if (time[3]) {
      h = h % 12; // normalize between 0 and 11

      if (time[3].toLowerCase()[0] === 'p') {
        h += 12; // add 12 hours if pm
      }
    }
    
    // hardcode UTC offset
    h += 5;
    // normalize between 0 and 23
    h = h % 24;
    var m =  parseInt( time[2]) || 0;
    return new Date(Date.UTC(2024, 1, 19, h, m));
  }
});
  // do smooth scroll when clicking an #anchor link instead of jumping
document.addEventListener('click', function(e) {
  const origin = e.target.closest(`a`);
  if (!origin || !origin.href) return;
  
  var parts = origin.href.match(/^([^#]*)#(.+)/);
  if (parts && parts.length >=3 && parts[1] === (window.location.origin + location.pathname) && parts[2]) {
    
    // cancel jump
    e.preventDefault();

    var elmntToView = document.getElementById(parts[2]);
    elmntToView.scrollIntoView({behavior: "smooth"}); 
  }
});

  document.addEventListener("DOMContentLoaded", function() {

  var scheduleRowsToCheck = document.querySelectorAll('table.schedule tr[start][end]');

  if (scheduleRowsToCheck.length > 0) {
    setInterval(checkScheduleRows, 1000);
    checkScheduleRows();
  }

  function checkScheduleRows() {
    var now = new Date();
    scheduleRowsToCheck.forEach(function(el) {
      var start = new Date(parseInt(el.getAttribute('start') + '000'));
      var end = new Date(parseInt(el.getAttribute('end') + '000'));
      if (now >= start && now < end) {
        if (!el.classList.contains('ongoing')) {
          el.classList.add('ongoing');
        }
      } else if (el.classList.contains('ongoing')) {
        el.classList.remove('ongoing');
      }
    });
  }

  var homepageUrl = document.querySelector('meta[name="homepage"]').getAttribute('content');
  var nextEventEl = document.querySelector('meta[name="dogwood-next-event"]');
  if (nextEventEl) createRealtimeMessage();

  function createRealtimeMessage() {

    var title = nextEventEl.getAttribute('content');

    var noticeInfo = JSON.parse(localStorage.getItem('notice-info')) || null;
    if (noticeInfo && noticeInfo.title !== title)  {
      localStorage.removeItem('notice-info');
      noticeInfo = null;
    }

    var end = new Date(parseInt(nextEventEl.getAttribute('end') + '000'));
    var now = new Date();

    // don't show something that's over
    if (now > end) return;

    var link = nextEventEl.getAttribute('href');

    // don't show if we're already on the promoted part of the site
    if (window.location.href.startsWith(link) || 
      // or if we're on the homepage since content is already promoted there
      window.location.href === homepageUrl + '/') return;

    var start = new Date(parseInt(nextEventEl.getAttribute('start') + '000'));

    if (now < start &&
        noticeInfo &&
        now.getTime() < noticeInfo.clicked + 172800000
        ) {
      // don't notify again if event hasn't started yet and it's been under two days since last notified
      return;
    }

    var tagline = nextEventEl.getAttribute('tagline');
    var logo = nextEventEl.getAttribute('logo');
    
    var notice = document.createElement('a');
    notice.setAttribute('href', link);
    notice.setAttribute('id', 'notice-overlay');
    notice.classList.add(nextEventEl.getAttribute('noticeclass'));
    var html = '';

    if (logo) {
      html += '<img class="logo" src="' + logo + '"/>';
    }
    html += '<div class="messages">';
    var status = start > now ? 'Upcoming' : 'Happening Now';
    html += '<div class="status-bubble">' + status + '</div>';
    html += '<p><b>' + title + '</b><br/>' + tagline + '</p>'
    html += '</a>';
    
    notice.innerHTML = html;
    document.body.appendChild(notice);

    notice.addEventListener('click', function() {
      localStorage.setItem('notice-info', JSON.stringify({
        title: title,
        clicked: now.getTime()
      }));
    });
  }
});
</script>
  <script type="text/javascript">
  // put your custom JS here
</script>
</body>
</html>