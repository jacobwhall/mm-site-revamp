<!DOCTYPE html>
<html>
<head>
  <title> Geodata guiding health interventions in IDP camps around Goma |  Missing Maps</title>
<meta name="og:title" content="Geodata guiding health interventions in IDP camps around Goma">
<meta property="og:url" content="https://osmus.github.io/dogwood/blog/2023/06/geodata-guiding-health-interventions-in-IDP-camps-around-goma/">

<meta name="og:description" content="Amidst the ongoing conflict and displacement crisis in the Democratic Republic of Congo, utilizing geodata contributes to an effective evaluation of the situation, understanding the extent of displacement in...">

  <meta name="og:image" content="https://osmus.github.io/dogwood/img/posts/2023-06-19-missingmaps-blog_DRC_banner.JPEG">
  <meta name="og:image:url" content="https://osmus.github.io/dogwood/img/posts/2023-06-19-missingmaps-blog_DRC_banner.JPEG">

<meta name="twitter:site" content="@TheMissingMaps">
<meta name="twitter:creator" content="@TheMissingMaps">
<script type="application/ld+json">
  {
    "@context" : "https://schema.org",
    "@type" : "WebSite",
    "name" : "Missing Maps",
    
    "url" : "https://osmus.github.io"
  }
</script>
  <link rel="preload" href="https://osmus.github.io/dogwood/img/posts/2023-06-19-missingmaps-blog_DRC_banner.JPEG" as="image"><!-- load the most prominent image first -->

  <meta charset="UTF-8"/>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@TheMissingMaps">
<script type="application/ld+json">
  {
    "@context" : "https://schema.org",
    "@type" : "WebSite",
    "name" : "Missing Maps",
    
    "url" : "https://osmus.github.io"
  }
</script>
<link rel="apple-touch-icon" sizes="57x57" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://osmus.github.io/dogwood/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://osmus.github.io/dogwood/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://osmus.github.io/dogwood/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://osmus.github.io/dogwood/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://osmus.github.io/dogwood/img/favicon/favicon-16x16.png">
<link rel="manifest" href="https://osmus.github.io/dogwood/manifest.json">
<link rel="shortcut icon" href="https://osmus.github.io/dogwood/img/favicon/favicon.ico" type="image/x-icon" />
<meta name="msapplication-TileColor" content="#000">
<meta name="msapplication-TileImage" content="https://osmus.github.io/dogwood/img/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#000">
<meta name="homepage" content="https://osmus.github.io/dogwood">






<link href="https://osmus.github.io/dogwood/assets/style.css" rel="stylesheet" />

</head>
<body class="layout-post
has-image


    page-blog
  
    page-geodata-guiding-health-interventions-in-idp-camps-around-goma
  
ispage-geodata-guiding-health-interventions-in-idp-camps-around-goma">
  <script type="text/javascript">
  // paste your analytics trackers here
</script>
  <div class="topbar">
  <div class="container">
    <a href="https://osmus.github.io/dogwood" class="site-wordmark">
      <img class="logo" src="https://osmus.github.io/dogwood/img/MM_white_typography.svg"/>
      <span class='text'>Missing Maps</span>
    </a>
    <ul class='headernav'><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/">Get Involved</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/mapswipe/" >MapSwipe</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/tasking-manager/" >The Tasking Manager</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/validation/" >Validation</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/field-mapping/" >Field Mapping</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/advanced-mapping/" >Advanced Mapping</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/contribute/mapping-guides/" >Mapping Guides</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/organize/">Organize an Event</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/training-materials/" >Training Materials</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/planning-checklist/" >Planning Checklist</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/organize/event-day-checklist/" >Event Day Checklist</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/blog/">Blog</a><ul class='submenu'><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/blog/" >Latest</a>
                  </li><li class="">
                    <a class='button-label ' href="https://osmus.github.io/dogwood/blog/archive/" >Archive</a>
                  </li></ul></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/support/">Support</a></li><li class="">
            <a class='button-label ' href="https://osmus.github.io/dogwood/stats/">Stats</a></li><li class="">
            <a class='button-label button bordered' href="https://osmus.github.io/dogwood/events">Missing Maps Events</a></li></ul>
  </div>
</div>
  <div class="layout-body">
    <article class="content">
  <div class='cover '>
        <div class="container stretch"><figure class="cover-image-container">
                    <div class="cover-image" role="img" style="background-image: url('https://osmus.github.io/dogwood/img/posts/2023-06-19-missingmaps-blog_DRC_banner.JPEG');"></div></figure></div>
    </div>
  <div class="container">
    <div class='post-header'>
   <!-- <div class="breadcrumbs"><a href="https://osmus.github.io/dogwood/blog/2023/06/">
      <svg class="iconsvg"><use xlink:href="#arrow-left"></use></svg>
      
        
        
          June</a></div>--> 
      <div class="pagenav">
  <div>
    <a class="selflink" href="https://osmus.github.io/dogwood/blog/2023/06/geodata-guiding-health-interventions-in-IDP-camps-around-goma/"><h1>Geodata guiding health interventions in IDP camps around Goma</h1></a><p class="meta"><span class="date">Jun 19, 2023</span>
          &middot; 
    <span class='author'><a href="https://osmus.github.io/dogwood/people/jana-bauerova/"><span class="avatar inline-avatar" role="img" style="background-image: url(https://osmus.github.io/dogwood/img-thumbnails/people/jana.jpg.webp), url(https://osmus.github.io/dogwood/assets/avatar.jpg)"></span>
Jana Bauerová</a></span>
</p></div>
  <ul>
    
  </ul>
</div>
    </div>
    <div class='post-body prose centered'>
      <div class="neatline"></div>
      <p><em>Amidst the ongoing conflict and displacement crisis in the Democratic Republic of Congo, utilizing geodata contributes to an effective evaluation of the situation, understanding the extent of displacement in a setting where estimating the number and spread of population is never an easy task.</em></p>

<p>Since March 2022, around one million of people have fled the upsurge of heavy fighting between the Congolese army and militant groups, including the M23, in North Kivu. This is adding to the already high number of internally displaced people (IDPs) in North-Kivu, reaching now a total of approximately 2.3 million (according to the United-Nations Office for the Coordination of Humanitarian Affairs (OCHA, 2023). Displacement is still ongoing and very few IDPs dare to return. The majority of IDPs have moved closer to Goma to seek safety and established temporary camps on its outskirts. Living conditions were dire, with people lacking everything; from shelter and food, to clean water and toilets, exposed to the risk of disease outbreaks, as well as sexual violence. Médecins Sans Frontières (MSF) was one of the first humanitarian actors to respond in several of the camps around Goma.</p>

<p>MSF teams are working in several displacement sites close to Goma, including Kanyaruchinya, Munigi, Rusayo, Eloime, Shabindu, Bulengo, Lushagala, Nzulu, ake and Shasha. The MSF teams first responded urgently to cholera and measles outbreaks in several sites, by providing medical care, building latrines and showers, and bringing thousands of liters of drinkable water for disease prevention. Today, MSF is additionally providing free medical services related to paediatric care and support for sexual violence survivors.</p>

<p>While implementing activities in displacement camps, MSF teams have also conducted field surveys to understand “How many people are there?” and “What is the mortality rate, reasons and places of death?”. In this context, geodata is used as an effective tool for population estimation, mortality assessment, and planning for ongoing and future health interventions.</p>

<h2 id="remote-mapping-and-sampling">Remote mapping and sampling</h2>

<p>The difficulty for establishing water and sanitation measures or a vaccination plan was that there were no recent, accurate, or specific IDP counts and maps in the massive displacement sites. Through the Missing Maps project, that aims to map areas where people live at risk of or affected by disasters and crises, the MSF emergency operations requested to map the newly established camps in OpenStreetMap (OSM). With help of recent aerial images, the MSF Missing Maps team set up projects in the Humanitarian OpenStreetMap Team (HOT) Tasking Manager, used for managing projects mapped at mapathons. From late March to early May 2023, a handful of experienced Missing Maps volunteers digitized in the JOSM editor over 56,000 shelters and buildings of host community in six IDP camps near Goma in a matter of days: Lushagala, Bulengo, Kashaka, Rusayo, Don Bosco, and Nzulu. These are mappers, who have been taking part in regular community mapathons, supporting MSF operations with the Missing Maps London or Missing Maps Czechia and Slovakia communities.</p>

<p><em>“This type of mapping was challenging in the beginning. First task open, I was stunned by how many tents had been constructed in such a small area. With more and more mapped tents, I got more comfortable with the precision and speed of the mapping. The overwhelming feeling that I am sitting comfortably at home and mapping this area remotely, while people there are forced to live completely different lives, is still with me,” shared an expert mapper, who goes by the OSM name anthaas.</em></p>

<p>With this base map data, a field survey could be organized. The tools used for the survey have been QGIS, Kobo collect, OSMAnd, and the RStudio Statistical Software package, all free and open-source tools. The mapping of the shelters of the camp was followed by spatial sampling. Employing the QGIS software, Oluwaseyi Ojo, the Geographic Information Systems (GIS) intern at the Manson Unit based at the MSF UK, randomly selected a specific number of buildings in each camp that would be represented by points, and grouped and named the selected buildings for easy usage for the surveyors in OsmAnd. Using QGIS, he also produced rapid reference maps.</p>

<p>The geodata sample was shared with the GIS specialist and the Public Health Analyst in the DRC. In teams of two interviewers, about 18 shelters a day could be visited. The goal was to find out how many people sleep there, and gather additional information, related to their health, the nutrition status of children, and deaths in the past three months. The Kobo toolbox was used to design a questionnaire. Using a standardized epidemiological study design and the appropriate statistical analysis, MSF could project the numbers gathered from the sample to the whole population.</p>

<h2 id="challenges-of-mobile-data-collection--playful-approach-helped">Challenges of mobile data collection – playful approach helped</h2>

<p>The interviewers for the survey had been trained during two days to navigate through the camps to the selected shelters in OsmAnd, a map and navigation app using the OSM map database that can function offline. They would collect information in Kobo collect, when interviewing the residents. There were various challenges with the field survey approach. “We realized there was a shift from the satellite image to the reality”, recounted the MSF Public health data analyst Georgios Karanapagos, “The initial training assumed a perfect system, that the map was perfect, the mobile was perfect… ”</p>

<p>However, there was a limited precision of the mobile devices. There could be an offset of about seven meters, so one dot on the screen could be matched with three different huts. In a randomly built camp, the navigation was trying to find ways, or streets, within this structure. So, as a surveyor, you might be only a hundred meters away from a point, but it would let you make a huge detour through a supposed “street” to get there. “We would try to tell the interviewers, look, this is a bunch of shelters, you can just walk past them and go directly to the point,” recalled Georgios.</p>

<p><em>“The quality of the mapping was so good that we could even easily identify the huts that had been destroyed in the meantime. Because this is a very dynamic camp, a lot of the huts are destroyed and built again. In 90 per cent of cases, we could either find the structure that was there, or even the new huts.”</em></p>

<p>At the beginning, the interviewers did not know how to read the maps. There were no signs, there was no Eiffel Tower to indicate the direction. Because of this inaccuracy, they would end up in the middle of the street, and they would say, there is no hut here. But in every neighborhood, there was one mapped structure bigger than the others; it could be the toilet, the water collection point, or an empty space and that would serve the team to orient. At first, the team had too many points that did not correspond to huts. Georgios spent time with the team checking them out, knowing it would be seven, or up to 10 meters off: “It was a sort of a game. Everyone in the team was excited, when they realized they could see the actual buildings, identify and logically arrive at the right one.” When they understood the process, they could even correct the trainer, who had taught them how to do it, and who might have had a rotational discrepancy at the moment.</p>

<p>Another aspect to be aware of is the potential bias of the interviewer, based on their preference. You arrive at a point and you see two or three huts that could correspond to the same point in the map. You might be tempted to choose on your personal favour. For example, an eager interviewer may choose the point that is a dwelling with many people in it, so they collect more data. And one who is bored or tired, who does not want to work a lot, may pick a dwelling that is empty. The interviewers need to have all more or less the same approach on identifying the huts.</p>

<p>Besides, the naming of the sectors and of the sub sectors was so random and developed day by day, that there was no consistency. The Geographic Information System (GIS) specialist is contributing to redefining all the section boundaries, and now former camp management is getting organized in Rusayo, Lushagala and other sites.</p>

<h2 id="what-is-next">What is next?</h2>

<p>After the field data collection, the Public health data analyst and the GIS specialist proceeded with cleaning the data. They worked with Excel files in QGIS. The mobile devices were reporting the GPS coordinates, composed by latitude (north-south position) and longitude (east-west position) with an inherent imprecision. Naming mistakes also happened: observing the spatial data in QGIS, they could see the point they had identified as B_12 was very close to B_I2, it did not always correspond to the map location, e.g. I and 1 could be interchanged.</p>

<p>The data analysis is ongoing. Most of the huts are the sleeping huts, but some are used as toilets, for storing or cooking food. The team determined the proportion of the sleeping huts with the study. By asking how many people slept in the building the night before, they could get a good estimate of what is the population residing in the camp, by multiplying the sample with an appropriate weight. In addition, if the camp is expanding a lot in the next two to three months, the organization can task another aerial image in three months. The GIS and data specialists can impute the structure, and the use of the camp, by the recent data analysis. Taking the proportion of the sleeping huts as a base, we expect the use of the huts will be similar, and can also project the use in the new population estimates.</p>

<p>Epidemiological surveillance data helps MSF to monitor and follow the course of an epidemic. Cholera is endemic in North Kivu. With vulnerable people living in crowded conditions without access to clean water, the situation escalated to a cholera epidemic in March 2023. Epidemiologists can see whether the epidemic is limited to the camp population, or when it starts to spread into the resident population. This data helps humanitarian workers to prepare rapid response mechanisms, such as provision of safe water and latrines, at the earliest signs of a spread. In addition, from retrospective data analysis, MSF can gain a better understanding of the characteristics of the epidemic outbreak, such as how quickly it spreads, effect of the response, and profile of affected populations, which helps to respond faster and better to the next epidemic, saving lives especially in the early days of an outbreak.</p>

<p>The method is already getting duplicated in other camps, where MSF is using the same method to undertake a field survey. The use of OSM data digitized from satellite images, spatial sampling for a field survey and the epidemilogical data has served to guide our medical action. MSF support, including the establishment of cholera treatment centres and basic health services, health promotion programmes, the provision of safe water, the construction of latrines and the implementation of a vaccination programme has helped to contain the cholera epidemics and reduce the number of cholera cases to pre-epidemic levels.</p>

<p>With cholera epidemics under control, other health and social issues have come into focus: a high number of measles cases due to low vaccination coverage, the poor nutritional status of many children, violence in the camp, especially against women, the missing or overcrowded camp schools, the lack of income opportunities for camp adults, etc. While the impact of geodata on the MSF health interventions in the IDP camps has been to estimate their populations, understand the levels and causes of mortality, and facilitate learning within the organization, the OSM data is available for other humanitarian organizations. The data can serve more efficient situational awareness and decision-making of aid workers concerning projects aimed to help those who need it the most.</p>

    </div></div>
</article>

  </div>
  <div class="footer dark">
  <div class="container">
    <div class="top">
      <a href="https://osmus.github.io/dogwood" class="site-wordmark">
        <img class="logo" src="https://osmus.github.io/dogwood/img/MM_white_typography.svg"/>
        <span class="text">Missing Maps</span>
      </a>
      <ul class="icon-buttons"><li>
            <a href="https://youtube.com/c/themissingmaps" target="_blank" title="YouTube">
              <svg class="iconsvg"><use xlink:href="#youtube"></use></svg>
            </a>
          </li><li>
            <a href="https://instagram.com/themissingmaps" target="_blank" title="Instagram">
              <svg class="iconsvg"><use xlink:href="#instagram"></use></svg>
            </a>
          </li><li>
            <a href="https://twitter.com/TheMissingMaps" target="_blank" title="Twitter">
              <svg class="iconsvg"><use xlink:href="#twitter"></use></svg>
            </a>
          </li><li>
            <a href="https://www.facebook.com/TheMissingMaps" target="_blank" title="Facebook">
              <svg class="iconsvg"><use xlink:href="#facebook"></use></svg>
            </a>
          </li><li>
            <a href="https://www.linkedin.com/company/missing-maps" target="_blank" title="LinkedIn">
              <svg class="iconsvg"><use xlink:href="#linkedin"></use></svg>
            </a>
          </li><li>
            <a href="https://github.com/MissingMaps" target="_blank" title="GitHub">
              <svg class="iconsvg"><use xlink:href="#github"></use></svg>
            </a>
          </li><li>
            <a href="mailto:info@hotosm.org" title="Email">
              <svg class="iconsvg"><use xlink:href="#envelope"></use></svg>
            </a>
          </li></ul>
    </div>
    <br/><div class="sitemap"><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/contribute/">Get Involved</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/mapswipe/" >MapSwipe</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/tasking-manager/" >The Tasking Manager</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/validation/" >Validation</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/field-mapping/" >Field Mapping</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/advanced-mapping/" >Advanced Mapping</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/contribute/mapping-guides/" >Mapping Guides</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/organize/">Organize an Event</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/training-materials/" >Training Materials</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/planning-checklist/" >Planning Checklist</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/organize/event-day-checklist/" >Event Day Checklist</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/blog/">Blog</a>
      </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/blog/" >Latest</a>
        </li><li>
          <a class='button-label' href="https://osmus.github.io/dogwood/blog/archive/" >Archive</a>
        </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/support/">Support</a>
      </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/stats/">Stats</a>
      </li></ul><ul>
      <li>
        <a class='button-label' href="https://osmus.github.io/dogwood/events">Missing Maps Events</a>
      </li></ul></div><hr/>
    <div class="smallprint">
      <p>© 2024 Missing Maps</p><p>Powered by <a href="https://github.com/osmus/dogwood" target="_blank">Dogwood</a></p>
    </div>
  </div>
</div>

  <script type="text/javascript">
  fetch("https://osmus.github.io/dogwood/assets/icons/fa-solid.svg")
    .then(function(response) {
        return response.text();
    })
    .then(function(text) {
        var div = document.createElement('div');
        div.innerHTML = text;
        document.body.insertBefore(div, document.body.childNodes[0]);
    });

fetch("https://osmus.github.io/dogwood/assets/icons/fa-brands.svg")
    .then(function(response) {
        return response.text();
    })
    .then(function(text) {
        var div = document.createElement('div');
        div.innerHTML = text;
        document.body.insertBefore(div, document.body.childNodes[0]);
    });
  document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.time').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || parseTime(el.textContent);
    var timeZoneLabel = date.toLocaleDateString(undefined, {
      day: '2-digit',
      timeZoneName: 'long',
      timeZone: targetTimeZone,
    }).substring(4);
    var localizedTimeString = date.toLocaleString(undefined, {
      hour: 'numeric',
      minute: 'numeric',
      timeZoneName: 'short',
      timeZone: targetTimeZone,
    });
    el.innerHTML = '<span title="' + timeZoneLabel + '">' + localizedTimeString + '</span>';
  });

  document.querySelectorAll('.day-long').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || new Date();
    var localizedTimeString = date.toLocaleDateString(undefined, {
      weekday: 'long',
      month: 'long',
      day: 'numeric',
      timeZone: targetTimeZone,
    });
    el.innerHTML = localizedTimeString;
  });

  document.querySelectorAll('.timezone').forEach(function(el) {
    var targetTimeZone = el.getAttribute('totimezone') || undefined;
    var sourceTime = el.getAttribute('time') && parseInt(el.getAttribute('time') + '000');
    var date = (sourceTime && new Date(sourceTime)) || new Date();
    el.textContent = date.toLocaleDateString(undefined, {
      day:'2-digit',
      timeZoneName: 'long',
      timeZone: targetTimeZone,
    }).substring(4);
  });

  function parseTime(t) {
    var time = t.match( /(\d+)(?::(\d\d))?\s*([pP]|[aA]?)/ );
    var h = parseInt(time[1]);

    // if am or pm
    if (time[3]) {
      h = h % 12; // normalize between 0 and 11

      if (time[3].toLowerCase()[0] === 'p') {
        h += 12; // add 12 hours if pm
      }
    }
    
    // hardcode UTC offset
    h += 5;
    // normalize between 0 and 23
    h = h % 24;
    var m =  parseInt( time[2]) || 0;
    return new Date(Date.UTC(2024, 1, 19, h, m));
  }
});
  // do smooth scroll when clicking an #anchor link instead of jumping
document.addEventListener('click', function(e) {
  const origin = e.target.closest(`a`);
  if (!origin || !origin.href) return;
  
  var parts = origin.href.match(/^([^#]*)#(.+)/);
  if (parts && parts.length >=3 && parts[1] === (window.location.origin + location.pathname) && parts[2]) {
    
    // cancel jump
    e.preventDefault();

    var elmntToView = document.getElementById(parts[2]);
    elmntToView.scrollIntoView({behavior: "smooth"}); 
  }
});

  document.addEventListener("DOMContentLoaded", function() {

  var scheduleRowsToCheck = document.querySelectorAll('table.schedule tr[start][end]');

  if (scheduleRowsToCheck.length > 0) {
    setInterval(checkScheduleRows, 1000);
    checkScheduleRows();
  }

  function checkScheduleRows() {
    var now = new Date();
    scheduleRowsToCheck.forEach(function(el) {
      var start = new Date(parseInt(el.getAttribute('start') + '000'));
      var end = new Date(parseInt(el.getAttribute('end') + '000'));
      if (now >= start && now < end) {
        if (!el.classList.contains('ongoing')) {
          el.classList.add('ongoing');
        }
      } else if (el.classList.contains('ongoing')) {
        el.classList.remove('ongoing');
      }
    });
  }

  var homepageUrl = document.querySelector('meta[name="homepage"]').getAttribute('content');
  var nextEventEl = document.querySelector('meta[name="dogwood-next-event"]');
  if (nextEventEl) createRealtimeMessage();

  function createRealtimeMessage() {

    var title = nextEventEl.getAttribute('content');

    var noticeInfo = JSON.parse(localStorage.getItem('notice-info')) || null;
    if (noticeInfo && noticeInfo.title !== title)  {
      localStorage.removeItem('notice-info');
      noticeInfo = null;
    }

    var end = new Date(parseInt(nextEventEl.getAttribute('end') + '000'));
    var now = new Date();

    // don't show something that's over
    if (now > end) return;

    var link = nextEventEl.getAttribute('href');

    // don't show if we're already on the promoted part of the site
    if (window.location.href.startsWith(link) || 
      // or if we're on the homepage since content is already promoted there
      window.location.href === homepageUrl + '/') return;

    var start = new Date(parseInt(nextEventEl.getAttribute('start') + '000'));

    if (now < start &&
        noticeInfo &&
        now.getTime() < noticeInfo.clicked + 172800000
        ) {
      // don't notify again if event hasn't started yet and it's been under two days since last notified
      return;
    }

    var tagline = nextEventEl.getAttribute('tagline');
    var logo = nextEventEl.getAttribute('logo');
    
    var notice = document.createElement('a');
    notice.setAttribute('href', link);
    notice.setAttribute('id', 'notice-overlay');
    notice.classList.add(nextEventEl.getAttribute('noticeclass'));
    var html = '';

    if (logo) {
      html += '<img class="logo" src="' + logo + '"/>';
    }
    html += '<div class="messages">';
    var status = start > now ? 'Upcoming' : 'Happening Now';
    html += '<div class="status-bubble">' + status + '</div>';
    html += '<p><b>' + title + '</b><br/>' + tagline + '</p>'
    html += '</a>';
    
    notice.innerHTML = html;
    document.body.appendChild(notice);

    notice.addEventListener('click', function() {
      localStorage.setItem('notice-info', JSON.stringify({
        title: title,
        clicked: now.getTime()
      }));
    });
  }
});
</script>
  <script type="text/javascript">
  // put your custom JS here
</script>
</body>
</html>